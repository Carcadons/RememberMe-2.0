<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="RememberMe">
    <meta name="description" content="Private pocket-dossier for remembering people before meetings">
    <meta name="theme-color" content="#6366f1">

    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">

    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">

    <!-- iOS specific -->
    <link rel="apple-touch-startup-image" href="/icons/splash-screen.png">

    <title>RememberMe</title>

    <!-- CSS Files -->
    <link rel="stylesheet" href="/css/design-system.css">
    <link rel="stylesheet" href="/css/components.css">

    <style>
        #importMenu.hidden {
            display: none !important;
        }

        #importMenu {
            animation: slideUp 0.2s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-brand">
                <h1 class="header-title">RememberMe</h1>
            </div>
            <button class="auth-button" id="authButton">
                <span id="authText">Set Passcode</span>
            </button>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Today View -->
            <div id="todayView" class="view active">
                <div class="empty-state" id="todayEmpty">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/>
                    </svg>
                    <h3 class="text-gradient">Start Your Day Right</h3>
                    <p>Add contacts to see who's on your schedule today</p>
                    <div style="display: flex; flex-direction: column; gap: 0.75rem; max-width: 300px; margin: 1.5rem auto 0;">
                        <button class="btn btn-primary" id="importContactsBtn">
                            ðŸ“± Import from iPhone Contacts
                        </button>
                        <button class="btn btn-secondary" id="importLinkedinBtn">
                            ðŸ’¼ Import from LinkedIn
                        </button>
                    </div>
                </div>
                <div id="todayList" class="hidden"></div>
            </div>

            <!-- Search View -->
            <div id="searchView" class="view">
                <input type="text" class="search-bar" id="searchInput" placeholder="Search by name, company, or tags...">
                <div id="searchResults"></div>
            </div>

            <!-- Starred View -->
            <div id="starredView" class="view">
                <div class="empty-state" id="starredEmpty">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                    </svg>
                    <h3 class="text-gradient">No Starred Contacts</h3>
                    <p>Star important people for quick access</p>
                </div>
                <div id="starredList" class="hidden"></div>
            </div>

            <!-- Loading State -->
            <div id="loadingState" class="loading hidden">
                <div class="spinner"></div>
                <p>Loading your contacts...</p>
            </div>
        </main>

        <!-- Floating Action Button -->
        <button class="fab" id="addPersonBtn" title="Add new contact">
            +
        </button>

        <!-- Import Menu (Hidden by default) -->
        <div id="importMenu" class="hidden" style="position: fixed; bottom: 160px; right: 24px; display: flex; flex-direction: column; gap: 0.75rem; z-index: 998;">
            <button class="btn btn-secondary" id="importContactsBtnMobile" style="box-shadow: 0 4px 12px rgba(0,0,0,0.15); border-radius: 24px; padding: 0.75rem 1.5rem; font-size: 0.875rem;">
                ðŸ“± iPhone Contacts
            </button>
            <button class="btn btn-secondary" id="importLinkedinBtnMobile" style="box-shadow: 0 4px 12px rgba(0,0,0,0.15); border-radius: 24px; padding: 0.75rem 1.5rem; font-size: 0.875rem;">
                ðŸ’¼ LinkedIn
            </button>
        </div>

        <!-- Tab Bar -->
        <nav class="tab-bar">
            <button class="tab-button active" data-view="todayView">
                <svg class="tab-icon" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/>
                </svg>
                <span>Today</span>
            </button>
            <button class="tab-button" data-view="searchView">
                <svg class="tab-icon" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                </svg>
                <span>Search</span>
            </button>
            <button class="tab-button" data-view="starredView">
                <svg class="tab-icon" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                </svg>
                <span>Starred</span>
            </button>
        </nav>
    </div>

    <!-- JavaScript Library -->
    <script src="https://unpkg.com/@phosphor-icons/web@2.1.1"></script>

    <!-- App Scripts -->
    <script src="/src/utils/encryption.js"></script>
    <script src="/src/core/storage.js"></script>
    <script src="/src/core/security.js"></script>
    <script src="/src/components/TodayView.js"></script>
    <script src="/src/components/Search.js"></script>
    <script src="/src/components/StarredView.js"></script>
    <script src="/src/components/AddContactModal.js"></script>
    <script src="/src/components/ContactDetail.js"></script>
    <script src="/src/app.js"></script>
</body>
</html>
